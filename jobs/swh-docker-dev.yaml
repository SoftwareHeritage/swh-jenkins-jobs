- project:
    name: swh-docker-dev
    jobs:
      - swh-docker-dev

- job-template:
    name: swh-docker-dev
    gitlab_project_name: swh/devel/swh-environment
    gitlab_trigger: false
    description: "Build the swh/stack:latest image and run tests"
    project-type: pipeline
    docker_image: tox
    docker_options: -v /tmp:/tmp
    properties:
      - build-discarder:
          days-to-keep: 20
    triggers: !j2-yaml: |
      {% if production_jenkins %}
      - timed: "@midnight"
      {% else %}
      []
      {% endif %}

    dsl: !include-jinja2: templates/swh-docker-dev.groovy.j2
