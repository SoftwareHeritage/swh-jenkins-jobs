- job-template:
    name: "{name}/build-and-push"
    description: Build the docker image and publish it to a registry
    node: built-in
    project-type: pipeline
    dsl:
      !include-jinja2: templates/swh-build-docker-image.groovy.j2

    parameters:
      - git-parameter:
          name: TAG
          description: Tag to build the image and then use as name
          type: PT_BRANCH_TAG
          sortMode: DESCENDING_SMART
          selectedValue: TOP

- project:
    name: DLSMAVEXP
    display_name: maven-index-exporter
    repo_name: maven-index-exporter
    jobs:
      - "{name}"
      - "{name}/build-and-push"
